<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PPS-Client: client/pps-client.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PPS-Client
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
   <div id="projectbrief">Client for synchronizing the system clock to a GPS PPS source</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_db3a54907829b36871118d03417739cd.html">client</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pps-client.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains the principal PPS-Client controller functions and structures.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d4/d6a/pps-client_8h_source.html">../client/pps-client.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for pps-client.cpp:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d6/d17/pps-client_8cpp__incl.svg" width="164" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="../../d5/d60/pps-client_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4efd2ecedb34b38cd1000d86ba5f6ef9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a4efd2ecedb34b38cd1000d86ba5f6ef9">adjtimex</a> (struct timex *timex)</td></tr>
<tr class="separator:a4efd2ecedb34b38cd1000d86ba5f6ef9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbc77fa2372eda9338310a39a40e5a98"><td class="memItemLeft" align="right" valign="top">class List&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#afbc77fa2372eda9338310a39a40e5a98">rawErr</a> (<a class="el" href="../../d4/d6a/pps-client_8h.html#aa5447872a297a8e1f7b17b52bc91109c">SLEW_LEN</a>)</td></tr>
<tr class="separator:afbc77fa2372eda9338310a39a40e5a98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3713ce0f6ba3ed9b5ea67c2ef6012b83"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a3713ce0f6ba3ed9b5ea67c2ef6012b83">initialize</a> (bool verbose)</td></tr>
<tr class="separator:a3713ce0f6ba3ed9b5ea67c2ef6012b83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4d47fa254fa62368be4b75c2d5a5889"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#ad4d47fa254fa62368be4b75c2d5a5889">getAcquireState</a> (void)</td></tr>
<tr class="separator:ad4d47fa254fa62368be4b75c2d5a5889"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab553045428f9337e754db13f1d0ea647"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#ab553045428f9337e754db13f1d0ea647">setHardLimit</a> (double avgCorrection)</td></tr>
<tr class="separator:ab553045428f9337e754db13f1d0ea647"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9173ef2f7e0585cc0edbc7e5a733bc3b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a9173ef2f7e0585cc0edbc7e5a733bc3b">getTimeSlew</a> (int rawError)</td></tr>
<tr class="separator:a9173ef2f7e0585cc0edbc7e5a733bc3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5443ab59528135706e70991cf1f880d2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a5443ab59528135706e70991cf1f880d2">clampJitter</a> (int rawError)</td></tr>
<tr class="separator:a5443ab59528135706e70991cf1f880d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec269fd5b44aeaa993781dddc42a2b59"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#aec269fd5b44aeaa993781dddc42a2b59">makeAverageIntegral</a> (double avgCorrection)</td></tr>
<tr class="separator:aec269fd5b44aeaa993781dddc42a2b59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a7a8a06f0119359f624d891dbcfa08f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a2a7a8a06f0119359f624d891dbcfa08f">integralIsReady</a> (void)</td></tr>
<tr class="separator:a2a7a8a06f0119359f624d891dbcfa08f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3e070dc58f7e490d45a2f22b8a39120"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#af3e070dc58f7e490d45a2f22b8a39120">getMovingAverage</a> (int timeCorrection)</td></tr>
<tr class="separator:af3e070dc58f7e490d45a2f22b8a39120"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad144809048457027dfbddc492b3d70c1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#ad144809048457027dfbddc492b3d70c1">getNearestSecond</a> (void)</td></tr>
<tr class="separator:ad144809048457027dfbddc492b3d70c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a576eb54270dcbc8c14f4f253c1ab7432"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a576eb54270dcbc8c14f4f253c1ab7432">setClocktoNISTtime</a> (void)</td></tr>
<tr class="separator:a576eb54270dcbc8c14f4f253c1ab7432"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2237f5f4d517383c7b5d34dd7864272b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a2237f5f4d517383c7b5d34dd7864272b">setClockToGPStime</a> (void)</td></tr>
<tr class="separator:a2237f5f4d517383c7b5d34dd7864272b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad889ebd8ff46d7aece2aa6c4c7252ed2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#ad889ebd8ff46d7aece2aa6c4c7252ed2">buildRawErrorDistrib</a> (int rawError, double errorDistrib[], unsigned int *count)</td></tr>
<tr class="separator:ad889ebd8ff46d7aece2aa6c4c7252ed2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfb78affbbc9d2a44febd476606ceba9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#abfb78affbbc9d2a44febd476606ceba9">getAvgNoiseLevel</a> (int rawError)</td></tr>
<tr class="separator:abfb78affbbc9d2a44febd476606ceba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b30b41495a6426b5bb557ced936901b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a0b30b41495a6426b5bb557ced936901b">detectDelaySpike</a> (int rawError)</td></tr>
<tr class="separator:a0b30b41495a6426b5bb557ced936901b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad71923ccec11a6d6e132c43e60fe8765"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#ad71923ccec11a6d6e132c43e60fe8765">removeNoise</a> (int rawError)</td></tr>
<tr class="separator:ad71923ccec11a6d6e132c43e60fe8765"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8696238d80e8a7a4ae44de6de50ab1ce"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a8696238d80e8a7a4ae44de6de50ab1ce">getIntegral</a> (void)</td></tr>
<tr class="separator:a8696238d80e8a7a4ae44de6de50ab1ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41cf700bfcf61b67c3ac81dffa87ba61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a41cf700bfcf61b67c3ac81dffa87ba61">savePPStime</a> (int timeCorrection)</td></tr>
<tr class="separator:a41cf700bfcf61b67c3ac81dffa87ba61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e606d0a13050543f326fe38cbdf2807"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a0e606d0a13050543f326fe38cbdf2807">signedFractionalSeconds</a> (int fracSec)</td></tr>
<tr class="separator:a0e606d0a13050543f326fe38cbdf2807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a591a0ae1642849d67e2e71ee667051b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a591a0ae1642849d67e2e71ee667051b7">detectMissedPPS</a> (void)</td></tr>
<tr class="separator:a591a0ae1642849d67e2e71ee667051b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f6b018eacd7b65348729b5fe8e36d62"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a3f6b018eacd7b65348729b5fe8e36d62">detectExteralSystemClockChange</a> (struct timeval pps_t)</td></tr>
<tr class="separator:a3f6b018eacd7b65348729b5fe8e36d62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b63d979f88bd573c07f93f9275a9d6d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a1b63d979f88bd573c07f93f9275a9d6d">setClockFractionalSecond</a> (int correction)</td></tr>
<tr class="separator:a1b63d979f88bd573c07f93f9275a9d6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d5d29d75e6c2ed7c5f9f6ca495cce72"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a0d5d29d75e6c2ed7c5f9f6ca495cce72">correctFractionalSecond</a> (struct timeval *pps_t)</td></tr>
<tr class="separator:a0d5d29d75e6c2ed7c5f9f6ca495cce72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45f6556dce353a14a22a6fa6b976ebcd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a45f6556dce353a14a22a6fa6b976ebcd">doTimeFixups</a> (struct timeval pps_t)</td></tr>
<tr class="separator:a45f6556dce353a14a22a6fa6b976ebcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ca1e9c585b03dd3bd4f56e6e18f248c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a8ca1e9c585b03dd3bd4f56e6e18f248c">makeTimeCorrection</a> (struct timeval pps_t)</td></tr>
<tr class="separator:a8ca1e9c585b03dd3bd4f56e6e18f248c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5408f66dcd74d49bb4c84d775c7de62e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a5408f66dcd74d49bb4c84d775c7de62e">checkPPSInterrupt</a> (void)</td></tr>
<tr class="separator:a5408f66dcd74d49bb4c84d775c7de62e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a505a6be9b7669b349cea03a9fe663d74"><td class="memItemLeft" align="right" valign="top">struct timespec&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a505a6be9b7669b349cea03a9fe663d74">setSyncDelay</a> (int timeAt, int fracSec)</td></tr>
<tr class="separator:a505a6be9b7669b349cea03a9fe663d74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0010a2340006cbbcd5a4588b587a59c7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a0010a2340006cbbcd5a4588b587a59c7">readPPS_SetTime</a> (bool verbose, <a class="el" href="../../d1/d78/structtime_check_params.html">timeCheckParams</a> *tcp, <a class="el" href="../../de/d98/timepps_8h.html#a8be2367ee27819d7bd040c9dd7fa1b55">pps_handle_t</a> *pps_handle, int *pps_mode)</td></tr>
<tr class="separator:a0010a2340006cbbcd5a4588b587a59c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22519b13ce414a4bf003faf65bd68144"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a22519b13ce414a4bf003faf65bd68144">waitForPPS</a> (bool verbose, <a class="el" href="../../de/d98/timepps_8h.html#a8be2367ee27819d7bd040c9dd7fa1b55">pps_handle_t</a> *pps_handle, int *pps_mode)</td></tr>
<tr class="separator:a22519b13ce414a4bf003faf65bd68144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa31f487a99743d24af9076a3e11e5425"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#aa31f487a99743d24af9076a3e11e5425">version</a> = &quot;2.0.1&quot;</td></tr>
<tr class="memdesc:aa31f487a99743d24af9076a3e11e5425"><td class="mdescLeft">&#160;</td><td class="mdescRight">Program v2.0.0 updated on 9 Jul 2020.  <a href="../../d5/d60/pps-client_8cpp.html#aa31f487a99743d24af9076a3e11e5425">More...</a><br /></td></tr>
<tr class="separator:aa31f487a99743d24af9076a3e11e5425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fc43fe650a73ed6e4567288c6e1c6bd"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dc/d1d/struct_g.html">G</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a6fc43fe650a73ed6e4567288c6e1c6bd">g</a></td></tr>
<tr class="memdesc:a6fc43fe650a73ed6e4567288c6e1c6bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declares the global variables defined in <a class="el" href="../../d4/d6a/pps-client_8h.html" title="This file contains includes, defines and structures for PPS-Client.">pps-client.h</a>.  <a href="../../d5/d60/pps-client_8cpp.html#a6fc43fe650a73ed6e4567288c6e1c6bd">More...</a><br /></td></tr>
<tr class="separator:a6fc43fe650a73ed6e4567288c6e1c6bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06ca16ef16c65999f92e782aa19013bd"><td class="memItemLeft" align="right" valign="top">struct ppsFiles&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a06ca16ef16c65999f92e782aa19013bd">f</a></td></tr>
<tr class="memdesc:a06ca16ef16c65999f92e782aa19013bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">PPS-Client internal files.  <a href="../../d5/d60/pps-client_8cpp.html#a06ca16ef16c65999f92e782aa19013bd">More...</a><br /></td></tr>
<tr class="separator:a06ca16ef16c65999f92e782aa19013bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c1739130da458505b1f71ad592f4aed"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a1c1739130da458505b1f71ad592f4aed">writeJitterDistrib</a></td></tr>
<tr class="separator:a1c1739130da458505b1f71ad592f4aed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae61d5fc2faf3d364a57ead2e441b56db"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#ae61d5fc2faf3d364a57ead2e441b56db">writeErrorDistrib</a></td></tr>
<tr class="separator:ae61d5fc2faf3d364a57ead2e441b56db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc1e3899f4597efc25def0719403b0ed"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#afc1e3899f4597efc25def0719403b0ed">threadIsRunning</a> = false</td></tr>
<tr class="separator:afc1e3899f4597efc25def0719403b0ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5f05a0264c041c178fc78d1c695224b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#af5f05a0264c041c178fc78d1c695224b">readState</a> = false</td></tr>
<tr class="separator:af5f05a0264c041c178fc78d1c695224b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains the principal PPS-Client controller functions and structures. </p>
<p>The PPS-Client daemon synchronizes the system clock to a Pulse-Per-Second (PPS) source to a resolution of one microsecond with an absolute accuracy of a few microseconds. To obtain this level of performance PPS-Client provides offset corrections every second and frequency corrections every minute. This and removal of jitter in the reported PPS time keeps the system clock continuously synchronized to the PPS source.</p>
<p>A wired GPIO connection is required from a PPS source. Synchronization is provided by the rising edge of that PPS source which is connected to GPIO 4 on Raspberry Pi.</p>
<p>The executable for this daemon is "/usr/sbin/pps-client"</p>
<p>The daemon script is "/lib/systemd/system/pps-client.service"</p>
<p>The configuration file is "/etc/pps-client.conf" </p>

<p class="definition">Definition in file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a4efd2ecedb34b38cd1000d86ba5f6ef9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4efd2ecedb34b38cd1000d86ba5f6ef9">&#9670;&nbsp;</a></span>adjtimex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int adjtimex </td>
          <td>(</td>
          <td class="paramtype">struct timex *&#160;</td>
          <td class="paramname"><em>timex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>System call </p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00075">initialize()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00610">loadLastState()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00976">makeTimeCorrection()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00830">setClockFractionalSecond()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00454">setClockToGPStime()</a>, and <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00415">setClocktoNISTtime()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a4efd2ecedb34b38cd1000d86ba5f6ef9_icgraph.svg" width="328" height="291"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad889ebd8ff46d7aece2aa6c4c7252ed2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad889ebd8ff46d7aece2aa6c4c7252ed2">&#9670;&nbsp;</a></span>buildRawErrorDistrib()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buildRawErrorDistrib </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rawError</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>errorDistrib</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructs an exponentially decaying distribution of rawError with a half life on individual samples of 1 hour.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rawError</td><td>The distribution values. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">errorDistrib</td><td>The distribution being constructed. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">count</td><td>The count of distribution samples. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00492">492</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00102">ERROR_DISTRIB_LEN</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00109">HARD_LIMIT_1</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00217">G::hardLimit</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00074">RAW_ERROR_DECAY</a>, and <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00073">RAW_ERROR_ZERO</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00601">removeNoise()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_ad889ebd8ff46d7aece2aa6c4c7252ed2_icgraph.svg" width="324" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5408f66dcd74d49bb4c84d775c7de62e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5408f66dcd74d49bb4c84d775c7de62e">&#9670;&nbsp;</a></span>checkPPSInterrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int checkPPSInterrupt </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Logs loss and resumption of the PPS interrupt. Can force exit if the interrupt is lost for more than one hour when "exit-lost-pps=enable" is set in the config file.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, else -1 on error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01044">1044</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01250">waitForPPS()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a5408f66dcd74d49bb4c84d775c7de62e_icgraph.svg" width="294" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5443ab59528135706e70991cf1f880d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5443ab59528135706e70991cf1f880d2">&#9670;&nbsp;</a></span>clampJitter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int clampJitter </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rawError</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clamps rawError to an adaptive value relative to the average rawError and determined at the current <a class="el" href="../../dc/d1d/struct_g.html#a1701ef67969fbd2261dcda8ff8e6e50c" title="An adaptive limit value determined by setHardLimit() and applied to G.rawError by clampJitter() as th...">G.hardLimit</a> value from the current value of <a class="el" href="../../dc/d1d/struct_g.html#ab0a88d8922f11959b33547339b0bc271" title="PPS time delay value beyond which a delay is defined to be a delay spike.">G.noiseLevel</a>.</p>
<p>Once the rawError values have been limited to values of +/- 1 microsecond and the control loop has settled, this clamping causes the controller to make the average number of positive and negative rawError values equal rather than making the sum of the positive and negative jitter values zero. This removes the bias that would otherwise be introduced by the rawError values which are largely random and consequently would introduce a constantly changing random offset. The result is also to move the average PPS interrupt delay to its median value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rawError</td><td>The raw error value to be converted to a zero error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00248">248</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, and <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00217">G::hardLimit</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00601">removeNoise()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a5443ab59528135706e70991cf1f880d2_icgraph.svg" width="262" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0d5d29d75e6c2ed7c5f9f6ca495cce72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d5d29d75e6c2ed7c5f9f6ca495cce72">&#9670;&nbsp;</a></span>correctFractionalSecond()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int correctFractionalSecond </td>
          <td>(</td>
          <td class="paramtype">struct timeval *&#160;</td>
          <td class="paramname"><em>pps_t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes the error potentially introduced in the interrupt time by an external clock change. The correction that is introduced only needs to be good enough that the time servo can track out any remaining error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_t</td><td>The delayed time of the PPS rising edge returned by the system clock. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00873">873</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00830">setClockFractionalSecond()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00903">doTimeFixups()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a0d5d29d75e6c2ed7c5f9f6ca495cce72_cgraph.svg" width="427" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a0d5d29d75e6c2ed7c5f9f6ca495cce72_icgraph.svg" width="351" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0b30b41495a6426b5bb557ced936901b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b30b41495a6426b5bb557ced936901b">&#9670;&nbsp;</a></span>detectDelaySpike()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool detectDelaySpike </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rawError</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes jitter delay spikes by returning "true" as long as the jitter value remains beyond a threshold that is determined by the curent value of <a class="el" href="../../dc/d1d/struct_g.html#ab0a88d8922f11959b33547339b0bc271" title="PPS time delay value beyond which a delay is defined to be a delay spike.">G.noiseLevel</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rawError</td><td>The raw error vlue to be tested for being a delay spike.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>"true" if a delay spike is detected. Else "false". </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00544">544</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00218">G::clampAbsolute</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00217">G::hardLimit</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00180">G::isControlling</a>, and <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00090">NOISE_LEVEL_MIN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00601">removeNoise()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a0b30b41495a6426b5bb557ced936901b_icgraph.svg" width="304" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3f6b018eacd7b65348729b5fe8e36d62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f6b018eacd7b65348729b5fe8e36d62">&#9670;&nbsp;</a></span>detectExteralSystemClockChange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool detectExteralSystemClockChange </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>pps_t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determines whether the system clock has been set externally.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_t</td><td>The delayed time of the PPS rising edge returned by the system clock.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if clock was set else false. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00766">766</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00213">G::avgSlew</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00209">G::clockChanged</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00109">HARD_LIMIT_1</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00217">G::hardLimit</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00180">G::isControlling</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00176">G::seq_num</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00091">SLEW_LEN</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00092">SLEW_MAX</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00192">G::t_count</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00191">G::t_now</a>, and <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00364">writeToLog()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00903">doTimeFixups()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a3f6b018eacd7b65348729b5fe8e36d62_cgraph.svg" width="346" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a3f6b018eacd7b65348729b5fe8e36d62_icgraph.svg" width="367" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a591a0ae1642849d67e2e71ee667051b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a591a0ae1642849d67e2e71ee667051b7">&#9670;&nbsp;</a></span>detectMissedPPS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void detectMissedPPS </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Advances a monotonic time count <a class="el" href="../../dc/d1d/struct_g.html#aff88663e947462db1ed8bcdcf09d767e" title="Rounded seconds counted at the time of G.t_now.">G.t_count</a> second by second. That happens even when this function is not called in a particular second.</p>
<p>The <a class="el" href="../../dc/d1d/struct_g.html#aff88663e947462db1ed8bcdcf09d767e" title="Rounded seconds counted at the time of G.t_now.">G.t_count</a> value is used in <a class="el" href="../../d5/d60/pps-client_8cpp.html#a3f6b018eacd7b65348729b5fe8e36d62">detectExteralSystemClockChange()</a> to determine if the system time has been set externally. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00720">720</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00395">getNearestSecond()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00176">G::seq_num</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00192">G::t_count</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00194">G::t_mono_last</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00193">G::t_mono_now</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00191">G::t_now</a>, and <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00364">writeToLog()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01134">readPPS_SetTime()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a591a0ae1642849d67e2e71ee667051b7_cgraph.svg" width="334" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a591a0ae1642849d67e2e71ee667051b7_icgraph.svg" width="328" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a45f6556dce353a14a22a6fa6b976ebcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45f6556dce353a14a22a6fa6b976ebcd">&#9670;&nbsp;</a></span>doTimeFixups()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void doTimeFixups </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>pps_t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Makes any necessary corrections to the system time required or caused by external time keepers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_t</td><td>The delayed time of the PPS rising edge returned by the system clock. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00903">903</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00240">G::consensusTimeError</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00873">correctFractionalSecond()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00766">detectExteralSystemClockChange()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00238">G::doNISTsettime</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00242">G::doSerialsettime</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00395">getNearestSecond()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00239">G::nistTimeUpdated</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00048">SECS_PER_MINUTE</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00244">G::serialTimeError</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00243">G::serialTimeUpdated</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00454">setClockToGPStime()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00415">setClocktoNISTtime()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00193">sysCommand()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00192">G::t_count</a>, and <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00191">G::t_now</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00976">makeTimeCorrection()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a45f6556dce353a14a22a6fa6b976ebcd_cgraph.svg" width="367" height="307"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a45f6556dce353a14a22a6fa6b976ebcd_icgraph.svg" width="331" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad4d47fa254fa62368be4b75c2d5a5889"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4d47fa254fa62368be4b75c2d5a5889">&#9670;&nbsp;</a></span>getAcquireState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool getAcquireState </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns true when the control loop can begin to control the system clock frequency. At program start only the time slew is adjusted because the drift can be too large for it to be practical to adjust the system clock frequency to correct for it. SLEW_MAX sets a reasonable limit below which frequency offset can also be adjusted to correct system time.</p>
<p>Consequently, once the drift is within SLEW_MAX microseconds of zero and the controller has been running for at least 60 seconds (time selected for convenience), this function returns "true" causing the controller to begin to also adjust the system clock frequency offset.</p>
<dl class="section return"><dt>Returns</dt><dd>"true" when the control loop can begin to control the system clock frequency. Else "false". </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00138">138</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00213">G::avgSlew</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00048">SECS_PER_MINUTE</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00176">G::seq_num</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00092">SLEW_MAX</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00212">G::slewAccum_cnt</a>, and <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00214">G::slewIsLow</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00976">makeTimeCorrection()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_ad4d47fa254fa62368be4b75c2d5a5889_icgraph.svg" width="344" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="abfb78affbbc9d2a44febd476606ceba9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfb78affbbc9d2a44febd476606ceba9">&#9670;&nbsp;</a></span>getAvgNoiseLevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getAvgNoiseLevel </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rawError</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Averages rawError (exponential average) and the positive half of the rawError distribution to determine an average noise level.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rawError</td><td>The fractional second time of arrival of the PPS. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00525">525</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00601">removeNoise()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_abfb78affbbc9d2a44febd476606ceba9_icgraph.svg" width="307" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a8696238d80e8a7a4ae44de6de50ab1ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8696238d80e8a7a4ae44de6de50ab1ce">&#9670;&nbsp;</a></span>getIntegral()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double getIntegral </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>if <a class="el" href="../../dc/d1d/struct_g.html#a1701ef67969fbd2261dcda8ff8e6e50c" title="An adaptive limit value determined by setHardLimit() and applied to G.rawError by clampJitter() as th...">G.hardLimit</a> == HARD_LIMIT_1, gets an integral time correction as a 10 second average of integrals of average time corrections over one minute. Otherwise gets the integral time correction as the single last integral of average time corrections over one minute.</p>
<dl class="section return"><dt>Returns</dt><dd>The integral of time correction values. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00648">648</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00230">G::avgIntegral</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00109">HARD_LIMIT_1</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00217">G::hardLimit</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00229">G::integral</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00231">G::integralCount</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00068">NUM_INTEGRALS</a>, and <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02366">recordFrequencyVars()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00976">makeTimeCorrection()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a8696238d80e8a7a4ae44de6de50ab1ce_cgraph.svg" width="311" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a8696238d80e8a7a4ae44de6de50ab1ce_icgraph.svg" width="311" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af3e070dc58f7e490d45a2f22b8a39120"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3e070dc58f7e490d45a2f22b8a39120">&#9670;&nbsp;</a></span>getMovingAverage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double getMovingAverage </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeCorrection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maintains <a class="el" href="../../dc/d1d/struct_g.html#a9e362254ef6b852ecff131b84e6512fe" title="Contains the G.timeCorrection values from over the previous 60 seconds.">G.correctionFifo</a> which contains second-by-second values of time corrections over the last minute, accumulates a rolling sum of these and returns the moving average correction over the last minute.</p>
<p>Although moving average is more complicated to generate than a conventional expponential average, moving averge has almost the same amount of noise reduction per sample but no history of noise disburbances that occurred in any previous minute. Consequently, the servo loop can converge significantly faster using a moving average.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeCorrection</td><td>The time correction value to be accumulated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The average correction value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00365">365</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00227">G::correctionAccum</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00225">G::correctionFifo</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00232">G::correctionFifo_idx</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00226">G::correctionFifoCount</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00055">PER_MINUTE</a>, and <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00048">SECS_PER_MINUTE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00976">makeTimeCorrection()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_af3e070dc58f7e490d45a2f22b8a39120_icgraph.svg" width="362" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad144809048457027dfbddc492b3d70c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad144809048457027dfbddc492b3d70c1">&#9670;&nbsp;</a></span>getNearestSecond()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getNearestSecond </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the time of day as the nearest integer to the system time. Because <a class="el" href="../../d5/d60/pps-client_8cpp.html#a591a0ae1642849d67e2e71ee667051b7">detectMissedPPS()</a> is called very near the rollover of the second, this prevents <a class="el" href="../../dc/d1d/struct_g.html#a731388a0534e213eb1394acea4bcfe03" title="Rounded seconds of current time reported by gettimeofday().">G.t_now</a> from being initialized with the integer value of the previous second if <a class="el" href="../../d5/d60/pps-client_8cpp.html#a591a0ae1642849d67e2e71ee667051b7">detectMissedPPS()</a> is called slightly ahead of rollover. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00395">395</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00720">detectMissedPPS()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00903">doTimeFixups()</a>, and <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01250">waitForPPS()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_ad144809048457027dfbddc492b3d70c1_icgraph.svg" width="334" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a9173ef2f7e0585cc0edbc7e5a733bc3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9173ef2f7e0585cc0edbc7e5a733bc3b">&#9670;&nbsp;</a></span>getTimeSlew()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getTimeSlew </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rawError</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the average time offset from zero over the interval SLEW_LEN and updates avgSlew with this value every SLEW_LEN seconds. Excludes all large delay spikes from the average.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rawError</td><td>The raw error to be accumulated to determine average slew including delay spikes. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00204">204</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00213">G::avgSlew</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00088">LARGE_SPIKE</a>, <a class="el" href="../../d5/d60/pps-client_8cpp.html#afbc77fa2372eda9338310a39a40e5a98">rawErr()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00091">SLEW_LEN</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00211">G::slewAccum</a>, and <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00212">G::slewAccum_cnt</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00601">removeNoise()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a9173ef2f7e0585cc0edbc7e5a733bc3b_cgraph.svg" width="230" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a9173ef2f7e0585cc0edbc7e5a733bc3b_icgraph.svg" width="275" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3713ce0f6ba3ed9b5ea67c2ef6012b83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3713ce0f6ba3ed9b5ea67c2ef6012b83">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int initialize </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verbose</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets global variables to initial values at startup or restart and sets system clock frequency offset to zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">verbose</td><td>Enables printing of state status params when "true". </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00075">75</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/pps-client_8cpp.html#a4efd2ecedb34b38cd1000d86ba5f6ef9">adjtimex()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01877">assignProcessorAffinity()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00170">G::cpuVersion</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01356">getConfigs()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01834">getRPiCPU()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00106">HARD_LIMIT_NONE</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00217">G::hardLimit</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00059">INTEGRAL_GAIN</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00234">G::integralGain</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00058">INV_GAIN_0</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00220">G::invProportionalGain</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00172">G::isVerbose</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00168">G::nCores</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00222">G::t3</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00064">ZERO_OFFSET_RPI3</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00065">ZERO_OFFSET_RPI4</a>, and <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00196">G::zeroOffset</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01407">main()</a>, and <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01134">readPPS_SetTime()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a3713ce0f6ba3ed9b5ea67c2ef6012b83_cgraph.svg" width="312" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a3713ce0f6ba3ed9b5ea67c2ef6012b83_icgraph.svg" width="274" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a2a7a8a06f0119359f624d891dbcfa08f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a7a8a06f0119359f624d891dbcfa08f">&#9670;&nbsp;</a></span>integralIsReady()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool integralIsReady </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Advances the <a class="el" href="../../dc/d1d/struct_g.html#a9e362254ef6b852ecff131b84e6512fe" title="Contains the G.timeCorrection values from over the previous 60 seconds.">G.correctionFifo</a> index each second and returns "true" when 60 new time correction values have been accumulated in <a class="el" href="../../dc/d1d/struct_g.html#ab1a8929f898438c3b89b0b15a7c74dd6" title="Accumulates G.timeCorrection values from G.correctionFifo in getMovingAverage() in order to generate ...">G.correctionAccum</a>.</p>
<p>When a value of "true" is returned, new average time correction integrals have been generated by <a class="el" href="../../d5/d60/pps-client_8cpp.html#aec269fd5b44aeaa993781dddc42a2b59">makeAverageIntegral()</a> and are ready for use.</p>
<dl class="section return"><dt>Returns</dt><dd>"true" when ready, else "false". </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00333">333</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00232">G::correctionFifo_idx</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, and <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00048">SECS_PER_MINUTE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00976">makeTimeCorrection()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a2a7a8a06f0119359f624d891dbcfa08f_icgraph.svg" width="342" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If not already running, creates a detached process that will run as a daemon. Accepts one command line arg: -v that causes the daemon to run in verbose mode which writes a status string and event messages to the console once per second. These messages continue until the console that started the pps-client daemon is closed.</p>
<p>Alternatively, if the daemon is already running, displays a statement to that effect and accepts the following optional command line args:</p>
<p>The -v flag starts the second-by-second display of a status string that will continue until ended by ctrl-c.</p>
<p>The -s flag requests that specified files be saved. If the -s flag is not followed by a file specifier, a list of the files that can be saved is printed. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01407">1407</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02238">accessDaemon()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00407">bufferStatusMsg()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00875">createPIDfile()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00238">G::doNISTsettime</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00063">f</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02433">find_source()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02545">getRootHome()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00075">initialize()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00193">sysCommand()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01250">waitForPPS()</a>, and <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00364">writeToLog()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph.svg" width="710" height="443"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aec269fd5b44aeaa993781dddc42a2b59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec269fd5b44aeaa993781dddc42a2b59">&#9670;&nbsp;</a></span>makeAverageIntegral()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void makeAverageIntegral </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>avgCorrection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructs, at each second over the last 10 seconds in each minute, 10 integrals of the average time correction over the last minute.</p>
<p>These integrals are then averaged to <a class="el" href="../../dc/d1d/struct_g.html#aefaf376deb98a361cb1f69496a0444e6" title="One-minute average of the integrals in G.integral[].">G.avgIntegral</a> just before the minute rolls over. The use of this average of the last 10 integrals to correct the frequency offset of the system clock provides a modest improvement over using only the single last integral.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">avgCorrection</td><td>The average correction to be integrated. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00295">295</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00230">G::avgIntegral</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00232">G::correctionFifo_idx</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00109">HARD_LIMIT_1</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00217">G::hardLimit</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00229">G::integral</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00231">G::integralCount</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00068">NUM_INTEGRALS</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00069">PER_NUM_INTEGRALS</a>, and <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00048">SECS_PER_MINUTE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00976">makeTimeCorrection()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_aec269fd5b44aeaa993781dddc42a2b59_icgraph.svg" width="379" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a8ca1e9c585b03dd3bd4f56e6e18f248c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ca1e9c585b03dd3bd4f56e6e18f248c">&#9670;&nbsp;</a></span>makeTimeCorrection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int makeTimeCorrection </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>pps_t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Makes time corrections each second, frequency corrections each minute and removes jitter from the PPS time reported by pps_t.</p>
<p>Jitter is removed by clamping corrections to a sequence of positive and negative values each of magnitude one microsec. Thus the average timeCorrection, which is forced to be zero by the controller, also corresponds to a time delay where the number of positive and negative corrections are equal. Thus the correction is the median of the time delays causing the corrections rather than the average value of those delays. This strategy almost completely eliminates second-by-second noise.</p>
<p>This function is called by <a class="el" href="../../d5/d60/pps-client_8cpp.html#a0010a2340006cbbcd5a4588b587a59c7">readPPS_SetTime()</a> from within the one-second delay loop in the <a class="el" href="../../d5/d60/pps-client_8cpp.html#a22519b13ce414a4bf003faf65bd68144">waitForPPS()</a> function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_t</td><td>The delayed time of the PPS rising edge returned by the system clock.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success else -1 on system error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00976">976</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00181">G::activeCount</a>, <a class="el" href="../../d5/d60/pps-client_8cpp.html#a4efd2ecedb34b38cd1000d86ba5f6ef9">adjtimex()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00071">ADJTIMEX_SCALE</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00224">G::avgCorrection</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00903">doTimeFixups()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00236">G::freqOffset</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00138">getAcquireState()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00648">getIntegral()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00365">getMovingAverage()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00234">G::integralGain</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00333">integralIsReady()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00235">G::integralTimeCorrection</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00183">G::interruptReceived</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00220">G::invProportionalGain</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00180">G::isControlling</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00207">G::isDelaySpike</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00295">makeAverageIntegral()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00178">G::ppsTimestamp</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00201">G::rawError</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02412">recordOffsets()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00601">removeNoise()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00674">savePPStime()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00176">G::seq_num</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00704">signedFractionalSeconds()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00222">G::t3</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00192">G::t_count</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00191">G::t_now</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00221">G::timeCorrection</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00216">G::zeroError</a>, and <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00196">G::zeroOffset</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01134">readPPS_SetTime()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a8ca1e9c585b03dd3bd4f56e6e18f248c_cgraph.svg" width="400" height="544"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a8ca1e9c585b03dd3bd4f56e6e18f248c_icgraph.svg" width="354" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="afbc77fa2372eda9338310a39a40e5a98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbc77fa2372eda9338310a39a40e5a98">&#9670;&nbsp;</a></span>rawErr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">class List rawErr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d6a/pps-client_8h.html#aa5447872a297a8e1f7b17b52bc91109c">SLEW_LEN</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00204">getTimeSlew()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_afbc77fa2372eda9338310a39a40e5a98_icgraph.svg" width="230" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0010a2340006cbbcd5a4588b587a59c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0010a2340006cbbcd5a4588b587a59c7">&#9670;&nbsp;</a></span>readPPS_SetTime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int readPPS_SetTime </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verbose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d78/structtime_check_params.html">timeCheckParams</a> *&#160;</td>
          <td class="paramname"><em>tcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d98/timepps_8h.html#a8be2367ee27819d7bd040c9dd7fa1b55">pps_handle_t</a> *&#160;</td>
          <td class="paramname"><em>pps_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pps_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Requests a read of the timestamp of the PPS hardware interrupt by the system PPS driver and passes the value read to <a class="el" href="../../d5/d60/pps-client_8cpp.html#a8ca1e9c585b03dd3bd4f56e6e18f248c">makeTimeCorrection()</a>.</p>
<p>The first time pps-client runs, the time slew can be as large as hundreds of milliseconds. When this is the case, limits imposed by <a class="el" href="../../d5/d60/pps-client_8cpp.html#a4efd2ecedb34b38cd1000d86ba5f6ef9">adjtimex()</a> prevent changes in offset of more than about 500 microseconds each second. As a result, pps-client will make a partial correction each minute and will restart several times before the slew is small enough that <a class="el" href="../../d5/d60/pps-client_8cpp.html#ad4d47fa254fa62368be4b75c2d5a5889">getAcquireState()</a> will set <a class="el" href="../../dc/d1d/struct_g.html#afb1d1c2e765d3b79ea68d085a49e77f1" title="Set &quot;true&quot; by getAcquireState() when the control loop can begin to control the system clock frequency...">G.isControlling</a> to "true". This looping will eventually converge but can take as long as 20 minutes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">verbose</td><td>If "true" then write pps-client state status messages to the console. Else not.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tcp</td><td>State data for makeNISTTimeQuery</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_handle</td><td>The handle to the system PPS device. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_mode</td><td>The system PPS device mode.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if no restart is required, 1 if restart is required or -1 on system error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01134">1134</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00213">G::avgSlew</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00407">bufferStatusMsg()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00720">detectMissedPPS()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00107">HARD_LIMIT_1024</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00217">G::hardLimit</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00075">initialize()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00184">G::interruptLost</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00180">G::isControlling</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00976">makeTimeCorrection()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02505">readPPSTimestamp()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00048">SECS_PER_MINUTE</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00176">G::seq_num</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00092">SLEW_MAX</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00095">STRBUF_SZ</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00187">G::t</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00189">G::tm</a>, and <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00364">writeToLog()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01250">waitForPPS()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a0010a2340006cbbcd5a4588b587a59c7_cgraph.svg" width="670" height="282"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a0010a2340006cbbcd5a4588b587a59c7_icgraph.svg" width="290" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad71923ccec11a6d6e132c43e60fe8765"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad71923ccec11a6d6e132c43e60fe8765">&#9670;&nbsp;</a></span>removeNoise()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int removeNoise </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rawError</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes delay spikes and jitter from rawError and returns the resulting clamped zeroError.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rawError</td><td>The raw error value to be processed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The resulting zeroError value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00601">601</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00224">G::avgCorrection</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02294">buildErrorDistrib()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02316">buildJitterDistrib()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00492">buildRawErrorDistrib()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00218">G::clampAbsolute</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00248">clampJitter()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00544">detectDelaySpike()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00525">getAvgNoiseLevel()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00204">getTimeSlew()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00057">INV_GAIN_1</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00220">G::invProportionalGain</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00180">G::isControlling</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00207">G::isDelaySpike</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00204">G::ppsCount</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00203">G::rawErrorDistrib</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00176">G::seq_num</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00162">setHardLimit()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00056">SETTLE_TIME</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00058">writeErrorDistrib</a>, and <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00057">writeJitterDistrib</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00976">makeTimeCorrection()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_ad71923ccec11a6d6e132c43e60fe8765_cgraph.svg" width="324" height="392"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_ad71923ccec11a6d6e132c43e60fe8765_icgraph.svg" width="327" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a41cf700bfcf61b67c3ac81dffa87ba61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41cf700bfcf61b67c3ac81dffa87ba61">&#9670;&nbsp;</a></span>savePPStime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void savePPStime </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeCorrection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the time of the PPS rising edge from the timeCorrection value and sets the corresponding timestamp.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeCorrection</td><td>The correction to be applied to get the time of the PPS rising edge. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00674">674</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, and <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01581">writeTimestamp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00976">makeTimeCorrection()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a41cf700bfcf61b67c3ac81dffa87ba61_cgraph.svg" width="295" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a41cf700bfcf61b67c3ac81dffa87ba61_icgraph.svg" width="324" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a1b63d979f88bd573c07f93f9275a9d6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b63d979f88bd573c07f93f9275a9d6d">&#9670;&nbsp;</a></span>setClockFractionalSecond()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setClockFractionalSecond </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>correction</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Corrects the system time whenever the system clock is set externally.</p>
<p>The external device that sets the clock might inject a non-zero fractional second along with the whole seconds. It is assumed that the whole system clock seconds would have the same value as the whole PPS seconds. So the correction to the fractional second that is made must not cause a change to the whole seconds.</p>
<p>Because the <a class="el" href="../../d5/d60/pps-client_8cpp.html#a4efd2ecedb34b38cd1000d86ba5f6ef9">adjtimex()</a> function will not accept a negative number as a fractional second and the correction value is a positive number then to subtract the correction, (1e6 - correction) microseconds is added instead.</p>
<p>If correction is less than half a second then (1e6 - correction) is greater than half a second. That would push the system clock one second ahead of the PPS. To prevent that, one second is subtracted from the system clock whole seconds.</p>
<p>If the correction is greater than a half second then (1e6 - correction) is less than half a second so no change to the system clock whole seconds is necessary.</p>
<p>If the correction is near half a second, handling of the whole second is ambiguous and the change to the whole second could be wrong. In that case the the whole second error would eventually be caught by a time update from the external timekeeper and corrected then.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">correction</td><td>The fractional second correction value in microseconds. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00830">830</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/pps-client_8cpp.html#a4efd2ecedb34b38cd1000d86ba5f6ef9">adjtimex()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00222">G::t3</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00192">G::t_count</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00191">G::t_now</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00047">USECS_PER_SEC</a>, and <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00364">writeToLog()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00873">correctFractionalSecond()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a1b63d979f88bd573c07f93f9275a9d6d_cgraph.svg" width="340" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a1b63d979f88bd573c07f93f9275a9d6d_icgraph.svg" width="427" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a2237f5f4d517383c7b5d34dd7864272b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2237f5f4d517383c7b5d34dd7864272b">&#9670;&nbsp;</a></span>setClockToGPStime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setClockToGPStime </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If GPS time through a serial port is enabled in pps-client.conf, sets the system time whenever there is an error relative to the whole seconds obtained through the serial port by writing the whole second correction to the adjtimex function.</p>
<p>Errors are infrequent. But if one occurs the whole seconds of system clock are set. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00454">454</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/pps-client_8cpp.html#a4efd2ecedb34b38cd1000d86ba5f6ef9">adjtimex()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00244">G::serialTimeError</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00243">G::serialTimeUpdated</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00222">G::t3</a>, and <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00364">writeToLog()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00903">doTimeFixups()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a2237f5f4d517383c7b5d34dd7864272b_cgraph.svg" width="299" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a2237f5f4d517383c7b5d34dd7864272b_icgraph.svg" width="320" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a576eb54270dcbc8c14f4f253c1ab7432"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a576eb54270dcbc8c14f4f253c1ab7432">&#9670;&nbsp;</a></span>setClocktoNISTtime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setClocktoNISTtime </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If NIST time is enabled in pps-client.conf, sets the system time whenever there is an error relative to the whole seconds obtained from Internet NIST servers by writing the whole second correction to the adjtimex function.</p>
<p>Errors are infrequent. But if one occurs the whole seconds of system clock are set following the CHECK_TIME interval. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00415">415</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/pps-client_8cpp.html#a4efd2ecedb34b38cd1000d86ba5f6ef9">adjtimex()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00240">G::consensusTimeError</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00239">G::nistTimeUpdated</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00222">G::t3</a>, and <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00364">writeToLog()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00903">doTimeFixups()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a576eb54270dcbc8c14f4f253c1ab7432_cgraph.svg" width="302" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a576eb54270dcbc8c14f4f253c1ab7432_icgraph.svg" width="323" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ab553045428f9337e754db13f1d0ea647"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab553045428f9337e754db13f1d0ea647">&#9670;&nbsp;</a></span>setHardLimit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setHardLimit </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>avgCorrection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Uses <a class="el" href="../../dc/d1d/struct_g.html#a748a236acab00f406a18db3a0c19807a" title="Average slew value determined by getTimeSlew() from the average of G.slewAccum each time G....">G.avgSlew</a> or avgCorrection and the curent hard limit, <a class="el" href="../../dc/d1d/struct_g.html#a1701ef67969fbd2261dcda8ff8e6e50c" title="An adaptive limit value determined by setHardLimit() and applied to G.rawError by clampJitter() as th...">G.hardLimit</a>, to determine the global <a class="el" href="../../dc/d1d/struct_g.html#a1701ef67969fbd2261dcda8ff8e6e50c" title="An adaptive limit value determined by setHardLimit() and applied to G.rawError by clampJitter() as th...">G.hardLimit</a> to set on zeroError to convert error values to time corrections.</p>
<p>Because it is much more effective and does not introduce additional time delay, hard limiting is used instead of filtering to remove noise (jitter) from the reported time of PPS capture.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">avgCorrection</td><td>Current average correction value. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00162">162</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00181">G::activeCount</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00213">G::avgSlew</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00106">HARD_LIMIT_NONE</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00217">G::hardLimit</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00048">SECS_PER_MINUTE</a>, and <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00092">SLEW_MAX</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00601">removeNoise()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_ab553045428f9337e754db13f1d0ea647_icgraph.svg" width="275" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a505a6be9b7669b349cea03a9fe663d74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a505a6be9b7669b349cea03a9fe663d74">&#9670;&nbsp;</a></span>setSyncDelay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timespec setSyncDelay </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeAt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fracSec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets a nanosleep() time delay equal to the time remaining in the second from the time recorded as fracSec plus an adjustment value of timeAt in microseconds.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeAt</td><td>The adjustment value in microseconds.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fracSec</td><td>The fractional second part of the system time in microseconds.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The length of time to sleep in seconds and nanoseconds. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01044">1044</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00076">INTERRUPT_LOST</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00185">G::interruptLossCount</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00183">G::interruptReceived</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00051">SECS_PER_HOUR</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00176">G::seq_num</a>, and <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00364">writeToLog()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02004">showStatusEachSecond()</a>, and <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01250">waitForPPS()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a505a6be9b7669b349cea03a9fe663d74_cgraph.svg" width="262" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a505a6be9b7669b349cea03a9fe663d74_icgraph.svg" width="344" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0e606d0a13050543f326fe38cbdf2807"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e606d0a13050543f326fe38cbdf2807">&#9670;&nbsp;</a></span>signedFractionalSeconds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int signedFractionalSeconds </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fracSec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the fractional seconds part of interrupt time and if the value should be interpreted as negative then translates the value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fracSec</td><td>The delayed time of the PPS rising edge returned by the system clock.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The signed fractional seconds part of the time. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00704">704</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00047">USECS_PER_SEC</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00976">makeTimeCorrection()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a0e606d0a13050543f326fe38cbdf2807_icgraph.svg" width="400" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a22519b13ce414a4bf003faf65bd68144"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22519b13ce414a4bf003faf65bd68144">&#9670;&nbsp;</a></span>waitForPPS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void waitForPPS </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verbose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d98/timepps_8h.html#a8be2367ee27819d7bd040c9dd7fa1b55">pps_handle_t</a> *&#160;</td>
          <td class="paramname"><em>pps_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pps_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Runs the one-second wait loop that waits for the PPS hardware interrupt that returns the timestamp of the interrupt which is passed to <a class="el" href="../../d5/d60/pps-client_8cpp.html#a8ca1e9c585b03dd3bd4f56e6e18f248c">makeTimeCorrection()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">verbose</td><td>If "true" then write pps-client state status messages to the console. Else not.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_handle</td><td>The handle to the system PPS device. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_mode</td><td>The the system PPS device mode. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01250">1250</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d4f/pps-sntp_8cpp_source.html#l00371">allocInitializeNISTThreads()</a>, <a class="el" href="../../df/d28/pps-serial_8cpp_source.html#l00417">allocInitializeSerialThread()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00148">timeCheckParams::attr</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01693">bufferStateParams()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01044">checkPPSInterrupt()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00238">G::doNISTsettime</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00242">G::doSerialsettime</a>, <a class="el" href="../../dc/d4f/pps-sntp_8cpp_source.html#l00412">freeNISTThreads()</a>, <a class="el" href="../../df/d28/pps-serial_8cpp_source.html#l00464">freeSerialThread()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00055">g</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01356">getConfigs()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00395">getNearestSecond()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02350">HUPhandler()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00184">G::interruptLost</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00180">G::isControlling</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00207">G::isDelaySpike</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00172">G::isVerbose</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00610">loadLastState()</a>, <a class="el" href="../../dc/d4f/pps-sntp_8cpp_source.html#l00300">makeNISTTimeQuery()</a>, <a class="el" href="../../df/d28/pps-serial_8cpp_source.html#l00312">makeSerialTimeQuery()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00061">PPS_WINDOW</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01134">readPPS_SetTime()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00065">readState</a>, <a class="el" href="../../df/d28/pps-serial_8cpp_source.html#l00228">saveGPSTime()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00509">saveLastState()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01086">setSyncDelay()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00193">sysCommand()</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00192">G::t_count</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00191">G::t_now</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02337">TERMhandler()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00064">threadIsRunning</a>, <a class="el" href="../../d4/d6a/pps-client_8h_source.html#l00147">timeCheckParams::tid</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00053">version</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00435">writeStatusStrings()</a>, and <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00364">writeToLog()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01407">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a22519b13ce414a4bf003faf65bd68144_cgraph.svg" width="484" height="1000"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a22519b13ce414a4bf003faf65bd68144_icgraph.svg" width="208" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a06ca16ef16c65999f92e782aa19013bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06ca16ef16c65999f92e782aa19013bd">&#9670;&nbsp;</a></span>f</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct ppsFiles f</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PPS-Client internal files. </p>
<p>PPS-Client internal files. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00058">58</a> of file <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html">pps-files.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01407">main()</a>.</p>

</div>
</div>
<a id="a6fc43fe650a73ed6e4567288c6e1c6bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fc43fe650a73ed6e4567288c6e1c6bd">&#9670;&nbsp;</a></span>g</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/d1d/struct_g.html">G</a> g</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Declares the global variables defined in <a class="el" href="../../d4/d6a/pps-client_8h.html" title="This file contains includes, defines and structures for PPS-Client.">pps-client.h</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00053">53</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01613">alignNumbersAfter()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01654">alignTokens()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01877">assignProcessorAffinity()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01693">bufferStateParams()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00407">bufferStatusMsg()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02294">buildErrorDistrib()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02316">buildJitterDistrib()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00492">buildRawErrorDistrib()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00248">clampJitter()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00875">createPIDfile()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02123">daemonSaveArray()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00544">detectDelaySpike()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00766">detectExteralSystemClockChange()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00720">detectMissedPPS()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00903">doTimeFixups()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02433">find_source()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00138">getAcquireState()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00804">getChildPID()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01356">getConfigs()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00648">getIntegral()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01801">getLinuxVersion()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00365">getMovingAverage()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02545">getRootHome()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01834">getRPiCPU()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01273">getSharedConfigs()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00212">getString()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00204">getTimeSlew()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00253">hasString()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00075">initialize()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00333">integralIsReady()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02091">INThandler()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00610">loadLastState()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01407">main()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00295">makeAverageIntegral()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00976">makeTimeCorrection()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00486">open_logerr()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02172">parseSaveDataRequest()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00831">ppsIsRunning()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01219">processWriteRequest()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00466">read_logerr()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01134">readPPS_SetTime()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02366">recordFrequencyVars()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02412">recordOffsets()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00601">removeNoise()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01177">saveDoubleArray()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00509">saveLastState()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00674">savePPStime()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00830">setClockFractionalSecond()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00454">setClockToGPStime()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00415">setClocktoNISTtime()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00162">setHardLimit()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01086">setSyncDelay()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02004">showStatusEachSecond()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00193">sysCommand()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02337">TERMhandler()</a>, <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01250">waitForPPS()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01055">writeDistribution()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01104">writeErrorDistribFile()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00794">writeFileMsgToLog()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01145">writeFrequencyVars()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01090">writeJitterDistribFile()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01118">writeOffsets()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00435">writeStatusStrings()</a>, <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01581">writeTimestamp()</a>, and <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00364">writeToLog()</a>.</p>

</div>
</div>
<a id="af5f05a0264c041c178fc78d1c695224b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5f05a0264c041c178fc78d1c695224b">&#9670;&nbsp;</a></span>readState</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool readState = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00065">65</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01250">waitForPPS()</a>.</p>

</div>
</div>
<a id="afc1e3899f4597efc25def0719403b0ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc1e3899f4597efc25def0719403b0ed">&#9670;&nbsp;</a></span>threadIsRunning</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool threadIsRunning = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00064">64</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01250">waitForPPS()</a>.</p>

</div>
</div>
<a id="aa31f487a99743d24af9076a3e11e5425"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa31f487a99743d24af9076a3e11e5425">&#9670;&nbsp;</a></span>version</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* version = &quot;2.0.1&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Program v2.0.0 updated on 9 Jul 2020. </p>
<p>System call </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00053">53</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l02238">accessDaemon()</a>, and <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01250">waitForPPS()</a>.</p>

</div>
</div>
<a id="ae61d5fc2faf3d364a57ead2e441b56db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae61d5fc2faf3d364a57ead2e441b56db">&#9670;&nbsp;</a></span>writeErrorDistrib</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool writeErrorDistrib</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00058">58</a> of file <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html">pps-files.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01356">getConfigs()</a>, and <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00601">removeNoise()</a>.</p>

</div>
</div>
<a id="a1c1739130da458505b1f71ad592f4aed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c1739130da458505b1f71ad592f4aed">&#9670;&nbsp;</a></span>writeJitterDistrib</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool writeJitterDistrib</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l00057">57</a> of file <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html">pps-files.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d3e/pps-files_8cpp_source.html#l01356">getConfigs()</a>, and <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00601">removeNoise()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Dec 8 2020 13:43:25 for PPS-Client by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
